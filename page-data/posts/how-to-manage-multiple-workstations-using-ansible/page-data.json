{"componentChunkName":"component---src-templates-post-template-tsx","path":"/posts/how-to-manage-multiple-workstations-using-ansible/","result":{"data":{"markdownRemark":{"html":"<h2>Use Ansible</h2>\n<p>Thanks to Kubernetes and GCP, I don't use Ansible as often as in the past.\nHowever, it's stil useful to manage multiple environments.</p>\n<p>For example, I use Git to mange my dotfiles. And, the following scenario has become very common.</p>\n<ol>\n<li>Add a new line in .vimrc on one of my laptops.</li>\n<li>Git commit and push.</li>\n<li>(a few days later when I am now on my desktop) Git pull to get the latest.</li>\n</ol>\n<p>This is a perfect usecase for <a href=\"https://ansible.com\">Ansible</a></p>\n<h2>Ansible Playbook</h2>\n<p>Ansible supports a declarative approach, meaning I define the desired state in a yaml file.</p>\n<p>Here's an example of one of my playbook that does the following:</p>\n<ol>\n<li>Run apt update &#x26; upgrade</li>\n<li>Run prod server access (for my work)</li>\n<li>Pull the latest dotfiles</li>\n<li>Update neovim (my editor).</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> all\n  <span class=\"token key atrule\">vars_files</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ./vault.yaml\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> run apt update &amp; upgrade\n      <span class=\"token key atrule\">shell</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        apt update &amp;&amp; apt upgrade -y</span>\n      <span class=\"token key atrule\">become</span><span class=\"token punctuation\">:</span> yes\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> prodacccess\n      <span class=\"token key atrule\">expect</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> prodaccess\n        <span class=\"token key atrule\">responses</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">'SSO password for kkweon:'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'{{ become_pass }}'</span>\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> git pull dotfiles\n      <span class=\"token key atrule\">shell</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        cd github/dotfiles &amp;&amp; git pull --rebase</span>\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nvim update\n      <span class=\"token key atrule\">shell</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        nvim +PlugUpgrade +PlugClean +PlugInstall +PlugUpdate +UpdateRemotePlugins +qa!</span></code></pre></div>\n<p>And, I can simply run the same tasks on all of my workstations by running</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ansible-playbook <span class=\"token parameter variable\">-i</span> hosts playbook.yaml --ask-vault-pass</code></pre></div>","excerpt":"Use Ansible Thanks to Kubernetes and GCP, I don't use Ansible as often as in the past.\nHowever, it's stil useful to manage multipleâ€¦","frontmatter":{"date":"March 14, 2020","title":"How to manage multiple workstations using Ansible.","keywords":"Ansible","description":null},"fields":{"slug":"posts/how-to-manage-multiple-workstations-using-ansible"}}},"pageContext":{"slug":"posts/how-to-manage-multiple-workstations-using-ansible"}},"staticQueryHashes":["1339584786"],"slicesMap":{}}